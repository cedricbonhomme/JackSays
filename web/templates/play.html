<!DOCTYPE HTML>
<html>
<head>
    <title>Simone says</title>

    <!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery -->
    <script src="../static/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../static/js/bootstrap.min.js"></script>

    <script type="text/javascript" src="//code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">

    $(document).ready(function(){
        namespace = '/test'; // change to an empty string to use the global namespace

        // the socket.io documentation recommends sending an explicit package upon connection
        // this is specially important when using the global namespace

        socket = io.connect('http://' + document.domain + ':' + location.port + namespace);

        socket.on('connect', function() {
            socket.emit('my event', {data: 'I\'m connected!'});
            //socket.emit('get game id', {});
            console.log("invoking start");
        });
        socket.on('game id', function(msg) {
            console.log(msg);
            socket.emit('my event', {data: 'I\'m connected!'});
            var elements = $('#games').children();

            for (var i = 0; i < elements.length; i++) {
                $(elements[i]).hide();
            }
            $('#'+msg.id).show();
            
             
        });
        socket.emit('get game data', {});
        socket.on('game data', function(msg) {console.log(msg);
        setInterval(function () {socket.emit('get game id', {})}, msg.time_left*1000+1000);
        });

        // event handler for server sent data
        // the data is displayed in the "Received" section of the page
        socket.on('err', function(msg) {
            window.alert(msg.data);
        });

        $('form#game1').submit(function(event) {
            socket.emit('game', {data: "game1"});
            return false;
        });

        socket.on('user list', function(msg) {
            $('#users').text(msg.data);
        });
})

    </script>
</head>
<body>
    <div class="container">
        <div id="games">
            <div id="game1">
                <form id="game1" method="POST" action='#'/>
                    <input type="submit" value="Push me!"/>
                </form>
            </div>
            <!-- Game: Pick One -->
            <div id="pickone">
                <button type="button" class="btn btn-pickone" style="background:red;width:120px;height:70px"></button>
                <button type="button" class="btn btn-pickone" aria-label="Left Align" style="background:yellow;width:120px;height:70px"></button>

                <script type="text/javascript" charset="utf-8">
                $('.btn-pickone').click(function(event) {
                    socket.emit('game', {data: "pickone"});
                    return false;
                });

                </script>

            </div>
            <!-- Game: Roma -->
            <div id="roma">
                <div class="row">
                    <div class="col-md-4"><div class="btn btn-default btn-roma">1</div>
                    </div>
                    <div class="col-md-4"><div class="btn btn-default btn-roma">2</div>
                    </div>
                    <div class="col-md-4"><div class="btn btn-default btn-roma">3</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4"><div class="btn btn-default btn-roma">4</div>
                    </div>
                    <div class="col-md-4"><div id="5" class="btn btn-default btn-roma">5</div>
                    </div>
                    <div class="col-md-4"><div class="btn btn-default btn-roma">6</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4"><div class="btn btn-default btn-roma">7</div>
                    </div>
                    <div class="col-md-4"><div class="btn btn-default btn-roma">8</div>
                    </div>
                    <div class="col-md-4"><div class="btn btn-default btn-roma">9</div>
                    </div>
                </div>
                <script type="text/javascript" charset="utf-8">
                $('.btn-roma').click(function(event) {
                    socket.emit('game', {data: "roma", button: this.id});
                    return false;
                });
                </script>
            </div>
            <!-- Game: Sound -->
            <div id="sound">

            </div>
            <div id="wait" style="background-color:red;height:100px;width:100px" >

            </div>
        </div>
    </div>
    <div id="users">
    </div>
    <div id="log">
    </div>
</body>
</html>
